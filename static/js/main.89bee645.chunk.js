(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),o=n(36),c=n.n(o),i=(n(47),n(10)),u=n(6),s=n(41),f=n(40),l=n.n(f),d=(n(101),function(e){var t=function(e,t){return e/t*100},n=t(e.startAt,e.duration),a=t(e.currentTime,e.duration)-n;return r.a.createElement("div",{className:"video-container__control-bar"},r.a.createElement("div",{className:"video-container__control-bar__navigator",style:{width:"".concat(a,"%"),left:"".concat(n,"%")}}),r.a.createElement(l.a,{step:.2,maxValue:e.duration,minValue:0,onChangeStart:e.onChangeStart,onChangeComplete:e.onChangeComplete,value:{min:e.startAt,max:e.endAt},onChange:e.onChange}))}),p=(n(102),"play"),m="pause",O="stop",y="goto",v="set/start_offset",g="set/end_offset",b="set/duration",h=function(e,t){switch(t.type){case p:return Object(u.a)({},e,{isPlaying:!0});case m:return Object(u.a)({},e,{isPlaying:!1});case O:return Object(u.a)({},e,{isPlaying:!1,currentPosition:e.startOffset});case v:return Object(u.a)({},e,{startOffset:t.payload});case g:return Object(u.a)({},e,{endOffset:t.payload});case y:return Object(u.a)({},e,{currentPosition:t.payload});case b:return Object(u.a)({},e,{duration:t.payload});default:return e}},E=function(e){var t=e.video,n=e.startAt,o=e.endAt,c=e.setting,u=e.onOk,f=Object(a.useRef)(),l=Object(a.useReducer)(h,{isPlaying:c.autoplay,currentPosition:n,startOffset:n,endOffset:o,duration:0}),O=Object(i.a)(l,2),E=O[0],j=O[1];return Object(a.useEffect)(function(){f.current=Object(s.a)(f.current,c),f.current.src({src:t,type:"video/mp4"}),f.current.ready(function(){f.current.currentTime(n),f.current.play()}),f.current.on("loadedmetadata",function(){j({type:b,payload:f.current.duration()}),"undefined"===typeof E.endOffset&&j({type:g,payload:f.current.duration()})}),f.current.on("timeupdate",function(){j({type:y,payload:f.current.currentTime()})})},[]),Object(a.useEffect)(function(){f.current.currentTime(E.startOffset)},[E.startOffset]),Object(a.useEffect)(function(){"undefined"!==typeof E.endOffset&&E.currentPosition>E.endOffset&&f.current.currentTime(E.startOffset),E.isPlaying&&f.current.paused()?f.current.play():E.isPlaying||f.current.paused()||f.current.pause()},[E]),Object(a.useEffect)(function(){f.current.currentTime(E.startOffset)},[E.startOffset]),Object(a.useEffect)(function(){f.current.currentTime(E.endOffset)},[E.endOffset]),r.a.createElement("div",null,r.a.createElement("div",{className:"video-container"},r.a.createElement("video",{ref:f,className:"video-js vjs-default-skin","data-vjs-player":!0,type:"video/mp4"},"Your browser does not support the video tag."),E.endOffset&&0!==E.duration&&r.a.createElement(d,{duration:E.duration,currentTime:E.currentPosition,startAt:E.startOffset,endAt:E.endOffset,onChangeStart:function(e){j({type:m})},onChangeComplete:function(e){f.current.currentTime(E.startOffset),j({type:p})},onChange:function(e){e.min!==E.startOffset?j({type:v,payload:e.min}):e.max!==E.endOffset&&j({type:g,payload:e.max})}})),r.a.createElement("button",{onClick:function(){return u(E)}},"OK"))};E.defaultProps={startAt:0,onOk:function(){},setting:{fluid:!0,autoplay:!0,loop:!0,controls:!1}};var j=E;n(103);var w=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(0),u=Object(i.a)(c,2),s=u[0];return u[1],r.a.createElement("div",{className:"app"},r.a.createElement("h1",null,"Client side Video Trimmer (Experimental)"),r.a.createElement("div",null,r.a.createElement("h2",null,"1. Choose video file to upload (support only mp4)"),r.a.createElement("input",{type:"file",accept:"video/mp4",onChange:function(e){return o(URL.createObjectURL(e.target.files[0]))}})),r.a.createElement("div",null,r.a.createElement("h2",null,"2. Trim Video"),n&&r.a.createElement(j,{video:n,onOk:console.log})),r.a.createElement("div",{id:"progress"},s,"%"),r.a.createElement("video",{id:"preview-video",width:600,height:500}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},42:function(e,t,n){e.exports=n(104)},47:function(e,t,n){},48:function(e,t){}},[[42,1,2]]]);
//# sourceMappingURL=main.89bee645.chunk.js.map